// ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡πÇ‡∏°‡∏î‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
require('dotenv').config();  // ‡πÇ‡∏´‡∏•‡∏î‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå .env
const puppeteer = require('puppeteer');  // ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
const fs = require('fs');  // ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÑ‡∏ü‡∏•‡πå
const { performance } = require('perf_hooks');  // ‡πÉ‡∏ä‡πâ‡∏ß‡∏±‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
const path = require('path');  // ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö ‡∏ß‡∏±‡∏ô/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô/‡∏õ‡∏µ ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á:‡∏ô‡∏≤‡∏ó‡∏µ:‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
function now() {
    const date = new Date();
    const day = String(date.getDate()).padStart(2, '0');
    const month = String(date.getMonth() + 1).padStart(2, '0');
    const year = date.getFullYear();
    const hours = String(date.getHours()).padStart(2, '0');
    const minutes = String(date.getMinutes()).padStart(2, '0');
    const seconds = String(date.getSeconds()).padStart(2, '0');
    return `${day}/${month}/${year} ${hours}:${minutes}:${seconds}`;
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏î‡πâ‡∏ß‡∏¢ setTimeout (‡∏ó‡∏î‡πÅ‡∏ó‡∏ô waitForTimeout ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö puppeteer ‡∏£‡∏∏‡πà‡∏ô‡πÄ‡∏Å‡πà‡∏≤)
async function wait(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏Å‡πÅ‡∏ö‡∏ö IIFE (Immediately Invoked Function Expression)
(async () => {
    // ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö browser instance ‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡πá‡∏≠‡∏Å
    let browser;
    const logs = [];
    const logFilename = `EmployeeWorkflow_log.txt`;

    try {
        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡πÑ‡∏î‡πâ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏° protocolTimeout
        browser = await puppeteer.launch({
            headless: false,
            args: [
                '--disable-features=PasswordManagerEnabled,AutomaticPasswordSaving',
                '--disable-save-password-bubble',
                '--start-maximized'
            ],
            protocolTimeout: 60000,  // ‡πÄ‡∏û‡∏¥‡πà‡∏° timeout ‡πÄ‡∏õ‡πá‡∏ô 60 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
            defaultViewport: null    // ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î viewport ‡πÉ‡∏´‡πâ‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠
        });

        // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ó‡πá‡∏ö‡πÉ‡∏´‡∏°‡πà
        const page = await browser.newPage();

        // ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° log ‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
        page.on('console', msg => console.log(`[${now()}] PAGE LOG:`, msg.text()));

        // // ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î
        // page.on('response', async response => {
        //     if (!response.ok()) {
        //         try {
        //             const body = await response.text();
        //             console.log(`[${now()}] ‚ùó RESPONSE ERROR (${response.status()}) ${response.url()}:\n${body}`);
        //         } catch (error) {
        //             console.log(`[${now()}] ‚ùó RESPONSE ERROR (${response.status()}) ${response.url()}: Could not get body`);
        //         }
        //     }
        // });

        // ========== ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö ==========

        logs.push(`üìÖ Timestamp: ${now()}`);
        logs.push(`üß™ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö`);

        const loadStart = performance.now();
        await page.goto(process.env.APP_URL, { waitUntil: 'networkidle0' });
        const loadEnd = performance.now();
        logs.push(`üöÄ Login Page Load Time: ${(loadEnd - loadStart).toFixed(2)} ms`);

        await page.waitForSelector('#username');
        await page.waitForSelector('#password');
        await page.type('#username', process.env.LOGIN_USERNAME_EMPLOYEE);
        await page.type('#password', process.env.LOGIN_PASSWORD_EMPLOYEE);
        await wait(800);  // ‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà‡∏Å‡πà‡∏≠‡∏ô‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°

        const loginStart = performance.now();
        await Promise.all([
            page.click('button[type="submit"]'),
            page.waitForNavigation({ waitUntil: 'networkidle0' }),
        ]);
        const loginEnd = performance.now();
        logs.push(`üîê Login Time: ${(loginEnd - loginStart).toFixed(2)} ms`);
        logs.push(`‚úÖ Login Successful`);

        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô
        try {
            const authInfo = await page.evaluate(() => {
                const token = localStorage.getItem('token') ||
                    sessionStorage.getItem('token') ||
                    localStorage.getItem('authToken') ||
                    sessionStorage.getItem('authToken');
                const userId = localStorage.getItem('userId') ||
                    sessionStorage.getItem('userId') ||
                    localStorage.getItem('user_id') ||
                    sessionStorage.getItem('user_id');
                return {
                    userId: userId || 'Not found',
                    hasToken: !!token
                };
            });
            logs.push(`üîç Auth Debug - User ID: ${authInfo.userId}, Token: ${authInfo.hasToken ? 'Found' : 'Not found'}`);
        } catch (error) {
            logs.push(`‚ö†Ô∏è Cannot read auth info: ${error.message}`);
        }

        // ========== ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå ==========

        logs.push(`üìÖ Timestamp: ${now()}`);
        logs.push(`üß™ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ Project List ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà`);

        // ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå
        await wait(1000);

        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ Project List ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà (‡∏´‡∏•‡∏±‡∏á‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô)
        // const isProjectListPage = await page.evaluate(() => {
        //     return window.location.pathname.includes('employeeProjectList') ||
        //         document.querySelector('button[value="projectlist"][data-state="active"]') !== null ||
        //         document.querySelector('button[aria-selected="true"]') !== null;
        // });

        // if (!isProjectListPage) {
        //     logs.push(`‚ö†Ô∏è ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ Project List ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏±‡πâ‡∏ô`);
        //     const navigateToProjectsStart = performance.now();
        //     await page.goto(`${process.env.APP_URL}/employeeProjectList`, { waitUntil: 'networkidle0' });
        //     const navigateToProjectsEnd = performance.now();
        //     logs.push(`üß≠ Navigation to Project List Time: ${(navigateToProjectsEnd - navigateToProjectsStart).toFixed(2)} ms`);
        // } else {
        //     logs.push(`‚úÖ ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ Project List ‡πÅ‡∏•‡πâ‡∏ß`);
        // }

        // // ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
        // await page.waitForFunction(() => {
        //     return !document.querySelector('.animate-spin') &&
        //         (document.querySelector('.project-card') ||
        //             document.querySelector('.project-list') ||
        //             document.querySelector('table tbody tr'));
        // }, { timeout: 10000 }).catch(() => {
        //     logs.push(`‚ö†Ô∏è ‡∏£‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÄ‡∏Å‡∏¥‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î`);
        // });

        // ========== ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÅ‡∏£‡∏Å ==========

        logs.push(`üìÖ Timestamp: ${now()}`);
        logs.push(`üß™ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÅ‡∏£‡∏Å`);

        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
        const projectExists = await page.evaluate(() => {
            const projectCards = document.querySelectorAll('.project-card');
            const tableRows = document.querySelectorAll('table tbody tr');
            return (projectCards.length > 0) || (tableRows.length > 0 && !tableRows[0].textContent.includes('No projects'));
        });

        if (projectExists) {
            logs.push(`‚úÖ ‡∏û‡∏ö‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö`);

            // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÅ‡∏£‡∏Å - ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û
            const selectProjectStart = performance.now();

            // ‡πÉ‡∏ä‡πâ try-catch ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô
            try {
                // // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å URL ‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏•‡∏¥‡∏Å ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
                // const beforeUrl = await page.url();
                // logs.push(`üîç URL ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå: ${beforeUrl}`);-----------------------------------------

                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ clickable element ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
                const hasClickableProject = await page.evaluate(() => {
                    return !!document.querySelector('.project-card a, table tbody tr a, .project-card button, table tbody tr button');
                });

                if (hasClickableProject) {
                    logs.push(`‚úì ‡∏û‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå`);

                    // ‡∏•‡∏î timeout ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô
                    // try {
                    //     await Promise.all([
                    //         page.click('.project-card a, table tbody tr a, .project-card button, table tbody tr button'),
                    //         page.waitForNavigation({ waitUntil: 'networkidle0', timeout: 7000 })
                    //     ]);
                    //     logs.push(`‚úì ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤`);
                    // } catch (navError) {
                    //     logs.push(`‚ö†Ô∏è ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏ï‡πà‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß: ${navError.message}`);
                    //     // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ URL ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏õ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
                    //     const currentUrl = await page.url();
                    //     if (currentUrl !== beforeUrl) {
                    //         logs.push(`‚úì ‡πÅ‡∏°‡πâ‡∏à‡∏∞‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡πÅ‡∏ï‡πà URL ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô: ${currentUrl}`);
                    //     } else {
                    //         logs.push(`‚ö†Ô∏è URL ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á ‡∏•‡∏≠‡∏á‡∏ß‡∏¥‡∏ò‡∏µ‡∏≠‡∏∑‡πà‡∏ô`);
                    //     }
                    // }
                } else {
                    logs.push(`‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏¥‡∏á‡∏Å‡πå ‡∏•‡∏≠‡∏á‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà element ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á`);

                    // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ clickable element ‡πÉ‡∏´‡πâ‡∏•‡∏≠‡∏á‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà element ‡∏≠‡∏∑‡πà‡∏ô‡πÅ‡∏ó‡∏ô
                    const hasProjectCard = await page.evaluate(() => !!document.querySelector('.project-card'));
                    const hasTableRow = await page.evaluate(() => !!document.querySelector('table tbody tr'));

                    if (hasProjectCard) {
                        logs.push(`‚úì ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà project card`);
                        await page.click('.project-card');
                    } else if (hasTableRow) {
                        logs.push(`‚úì ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà table row`);
                        await page.click('table tbody tr');
                    }
                }

                // ‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£ navigation ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå
                await wait(1000);

                // // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö URL ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏´‡∏•‡∏±‡∏á‡∏£‡∏≠
                // const afterUrl = await page.url();
                // logs.push(`üîç URL ‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå: ${afterUrl}`);
                // if (afterUrl !== beforeUrl) {
                //     logs.push(`‚úì URL ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå`);
                // }

            } catch (error) {
                logs.push(`‚ö†Ô∏è ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå: ${error.message}`);
            }

            const selectProjectEnd = performance.now();
            logs.push(`üîÑ Project Selection Time: ${(selectProjectEnd - selectProjectStart).toFixed(2)} ms`);

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ Timeline ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            const isTimelinePage = await page.evaluate(() => {
                return document.querySelector('button[value="timeline"][data-state="active"]') !== null ||
                    document.querySelector('button[aria-selected="true"]') !== null ||
                    window.location.pathname.includes('/employeePlan');
            });

            if (isTimelinePage) {
                logs.push(`‚úÖ ‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤ Timeline ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß`);

                // // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ß‡πà‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ Timeline ‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏≠‡∏∞‡πÑ‡∏£
                // const projectInfo = await page.evaluate(() => {
                //     const projectName = document.querySelector('h1, h2, .project-title')?.textContent || '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå';
                //     return { name: projectName };
                // });
                // logs.push(`üìã ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ Timeline ‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå: ${projectInfo.name}`);

                // ========== ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: ‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤ Resource/Budget ==========

                logs.push(`üìÖ Timestamp: ${now()}`);
                logs.push(`üß™ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤ Resource/Budget`);

                const navigateToResourceStart = performance.now();

                try {
                    // ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏£‡∏á‡πÜ
                    try {
                        await page.click('button[value="resource"], [aria-controls*="resource"], [title*="‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£"], [title*="Resource"]');
                        logs.push(`‚úì ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏° Resource/Budget ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á`);
                    } catch (directClickError) {
                        logs.push(`‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏°‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡πÑ‡∏î‡πâ: ${directClickError.message}`);

                        // ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡πÉ‡∏ä‡πâ JavaScript ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏°
                        await page.evaluate(() => {
                            const buttons = Array.from(document.querySelectorAll('button'));
                            console.log('‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:', buttons.length);

                            const resourceButton = buttons.find(button => {
                                const buttonText = button.innerText || button.textContent || '';
                                return button.value === 'resource' ||
                                    button.id && button.id.includes('trigger-resource') ||
                                    button.title && button.title.includes('‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£') ||
                                    buttonText.includes('Resource') || buttonText.includes('‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£');
                            });

                            if (resourceButton) {
                                console.log('‡∏û‡∏ö‡∏õ‡∏∏‡πà‡∏° Resource/Budget:', resourceButton.outerHTML);
                                resourceButton.click();
                                return true;
                            }

                            console.log('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏õ‡∏∏‡πà‡∏° Resource/Budget');
                            return false;
                        });

                        logs.push(`‚úì ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏° Resource/Budget ‡∏î‡πâ‡∏ß‡∏¢ JavaScript`);
                    }

                    // // ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô
                    // await Promise.race([
                    //     page.waitForNavigation({ waitUntil: 'networkidle0', timeout: 5000 }).catch(() => { }),
                    //     // wait(1000)  // ‡∏£‡∏≠‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
                    // ]);

                    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
                    const isResourcePage = await page.evaluate(() => {
                        const url = window.location.href;
                        const activeTab = document.querySelector('button[value="resource"][data-state="active"], button[aria-selected="true"][title*="‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£"]');
                        const pageTitle = document.querySelector('h1, h2')?.textContent || '';

                        return {
                            isResourcePage: !!activeTab || url.includes('resource') || url.includes('Resource'),
                            activeTabText: activeTab?.textContent || 'Resource/Budget',
                            url: url
                        };
                    });

                    if (isResourcePage.isResourcePage) {
                        logs.push(`‚úÖ ‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤ Resource/Budget ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à`);
                        // logs.push(`üîç URL ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: ${isResourcePage.url}`);
                        // logs.push(`üîç ‡πÅ‡∏ó‡πá‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: ${isResourcePage.activeTabText}`);

                        // ========== ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 5: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏î‡∏£‡∏≠‡∏õ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô/‡∏á‡∏≤‡∏ô ==========
                        logs.push(`üìÖ Timestamp: ${now()}`);
                        logs.push(`üß™ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏î‡∏£‡∏≠‡∏õ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô/‡∏á‡∏≤‡∏ô`);

                        const checkDropdownStart = performance.now();

                        try {
                            // ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πâ‡∏≤ Resource/Budget ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡∏Å‡πà‡∏≠‡∏ô
                            await wait(1000);

                            // ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏õ‡∏∏‡πà‡∏° + Add ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏•‡∏¥‡∏Å
                            const addButtonClicked = await page.evaluate(() => {
                                // ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ï‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
                                const addButtons = Array.from(document.querySelectorAll('button'))
                                    .filter(btn => btn.textContent?.includes('+ Add') || btn.textContent?.includes('Add'));

                                if (addButtons.length > 0) {
                                    console.log('‡∏û‡∏ö‡∏õ‡∏∏‡πà‡∏° + Add:', addButtons[0].outerHTML);
                                    addButtons[0].click();
                                    return true;
                                }

                                console.log('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏õ‡∏∏‡πà‡∏° + Add');
                                return false;
                            });

                            if (addButtonClicked) {
                                logs.push(`‚úì ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏° + Add ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à`);

                                // ‡∏£‡∏≠‡πÉ‡∏´‡πâ dialog ‡πÄ‡∏õ‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô
                                await wait(1000);

                                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ dialog ‡πÄ‡∏õ‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
                                const dialogOpened = await page.evaluate(() => {
                                    const dialog = document.querySelector('[role="dialog"], .dialog-content, [data-state="open"]');
                                    return !!dialog;
                                });

                                if (dialogOpened) {
                                    logs.push(`‚úÖ Dialog ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡πÄ‡∏õ‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à`);

                                    // ========== ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏° ==========
                                    logs.push(`üß™ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£`);

                                    try {
                                        // 1. ‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£ (Resource Name)
                                        const resourceNameInput = await page.$('input[placeholder="Enter Resource Name"]');
                                        if (resourceNameInput) {
                                            await resourceNameInput.type('‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö Puppeteer',);
                                            logs.push(`‚úì ‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£: "‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö Puppeteer"`);
                                        } else {
                                            logs.push(`‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£`);
                                        }

                                        // 2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£ (Resource Type)
                                        const selectTrigger = await page.$('.select-trigger');
                                        if (selectTrigger) {
                                            await selectTrigger.click();
                                            logs.push(`‚úì ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£`);

                                            // ‡∏£‡∏≠‡∏ô‡∏≤‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ï‡πá‡∏°‡∏ó‡∏µ‡πà
                                            await wait(1200);

                                            // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏µ‡∏ö‡∏±‡∏Å
                                            const availableOptions = await page.evaluate(() => {
                                                const allOptions = Array.from(document.querySelectorAll('.select-item, [role="option"], li[role="option"], .select-dropdown-item, div[data-value]'));
                                                return allOptions.map(opt => ({
                                                    text: opt.textContent.trim(),
                                                    value: opt.getAttribute('data-value'),
                                                    class: opt.className
                                                }));
                                            });

                                            logs.push(`‚ÑπÔ∏è ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏û‡∏ö: ${JSON.stringify(availableOptions)}`);

                                            // ‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô
                                            const optionClicked = await page.evaluate(() => {
                                                // ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏´‡∏•‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏ã‡πÄ‡∏•‡∏Å‡πÄ‡∏ï‡∏≠‡∏£‡πå
                                                const selectors = [
                                                    'div[role="option"]',
                                                    '.select-item',
                                                    'li[role="option"]',
                                                    '.select-dropdown-item',
                                                    'div[data-value]'
                                                ];

                                                // ‡∏£‡∏ß‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å‡πÄ‡∏ã‡πÄ‡∏•‡∏Å‡πÄ‡∏ï‡∏≠‡∏£‡πå
                                                let allOptions = [];
                                                selectors.forEach(selector => {
                                                    allOptions = [...allOptions, ...document.querySelectorAll(selector)];
                                                });

                                                // ‡∏Å‡∏£‡∏≠‡∏á‡∏ã‡πâ‡∏≥
                                                allOptions = [...new Set(allOptions)];

                                                // ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏ã‡∏•
                                                console.log('‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏û‡∏ö:', allOptions.map(opt => ({
                                                    text: opt.textContent.trim(),
                                                    value: opt.getAttribute('data-value') || 'no-value'
                                                })));

                                                // ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö equipment (‡πÑ‡∏°‡πà‡∏™‡∏ô‡πÉ‡∏à‡∏ï‡∏±‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏•‡πá‡∏Å)
                                                const equipmentOption = allOptions.find(option =>
                                                    option.textContent.toLowerCase().includes('equipment') ||
                                                    option.textContent.includes('‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå') ||
                                                    (option.getAttribute('data-value') || '').toLowerCase() === 'equipment'
                                                );

                                                if (equipmentOption) {
                                                    equipmentOption.click();
                                                    return true;
                                                }

                                                // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏û‡∏ö equipment ‡∏•‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà 2 (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
                                                if (allOptions.length > 1) {
                                                    console.log('‡πÑ‡∏°‡πà‡∏û‡∏ö equipment ‡πÅ‡∏ï‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà 2 ‡πÅ‡∏ó‡∏ô');
                                                    allOptions[1].click();
                                                    return true;
                                                } else if (allOptions.length > 0) {
                                                    // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡πÅ‡∏Ñ‡πà‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
                                                    allOptions[0].click();
                                                    return true;
                                                }

                                                return false;
                                            });

                                            if (optionClicked) {
                                                logs.push(`‚úì ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£ (‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà equipment)`);
                                            } else {
                                                logs.push(`‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÉ‡∏î‡πÜ ‡πÉ‡∏ô‡∏î‡∏£‡∏≠‡∏õ‡∏î‡∏≤‡∏ß‡∏ô‡πå`);
                                            }
                                        }

                                        // 3. ‡∏Å‡∏£‡∏≠‡∏Å‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô (Cost)
                                        const costInput = await page.$('input[placeholder="Enter Cost"]');
                                        if (costInput) {
                                            await costInput.click({ clickCount: 3 }); // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏î‡∏¥‡∏°)
                                            await costInput.type('1500');
                                            logs.push(`‚úì ‡∏Å‡∏£‡∏≠‡∏Å‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô: "1,500"`);
                                        } else {
                                            logs.push(`‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô`);
                                        }

                                        // 4. ‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (Quantity)
                                        const quantityInput = await page.$('input[placeholder="Enter Quantity"]');
                                        if (quantityInput) {
                                            await quantityInput.click({ clickCount: 3 }); // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏î‡∏¥‡∏°)
                                            await quantityInput.type('5');
                                            logs.push(`‚úì ‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: "5"`);
                                        } else {
                                            logs.push(`‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô`);
                                        }

                                        // ‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà‡∏Å‡πà‡∏≠‡∏ô‡∏Å‡∏î Save
                                        await wait(1000);

                                        // 5. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° Save
                                        const saveButton = await page.evaluateHandle(() => {
                                            // ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                                            const buttons = Array.from(document.querySelectorAll('button'));

                                            // ‡∏´‡∏≤‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° Save
                                            const saveBtn = buttons.find(button =>
                                                button.textContent.includes('Save') ||
                                                button.innerText.includes('Save')
                                            );

                                            return saveBtn;
                                        });

                                        if (saveButton) {
                                            await saveButton.click();
                                            logs.push(`‚úì ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° Save`);

                                            // ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô
                                            await wait(2000);

                                            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà (‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡∏à‡∏≤‡∏Å dialog ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà)
                                            const dialogClosed = await page.evaluate(() => {
                                                return !document.querySelector('[role="dialog"], .dialog-content, [data-state="open"]');
                                            });

                                            if (dialogClosed) {
                                                logs.push(`‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (dialog ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß)`);

                                                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡πÉ‡∏´‡∏°‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
                                                const newResourceExists = await page.evaluate(() => {
                                                    // ‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
                                                    return document.body.textContent.includes('‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö Puppeteer');
                                                });

                                                if (newResourceExists) {
                                                    logs.push(`‚úÖ ‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤`);
                                                } else {
                                                    logs.push(`‚ÑπÔ∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤`);
                                                }
                                            } else {
                                                logs.push(`‚ö†Ô∏è dialog ‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏î Save`);
                                            }
                                        } else {
                                            logs.push(`‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏õ‡∏∏‡πà‡∏° Save`);
                                        }
                                    } catch (formError) {
                                        logs.push(`‚ö†Ô∏è ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: ${formError.message}`);
                                    }
                                } else {
                                    logs.push(`‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö dialog ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° + Add`);
                                }

                                const checkDropdownEnd = performance.now();
                                logs.push(`üîÑ Dropdown Check Time: ${(checkDropdownEnd - checkDropdownStart).toFixed(2)} ms`);
                            } else {
                                logs.push(`‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏õ‡∏∏‡πà‡∏° + Add`);
                            }
                        } catch (error) {
                            logs.push(`‚ö†Ô∏è ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Resource/Budget: ${error.message}`);
                        }

                        // ========== ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 6: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏î‡∏£‡∏≠‡∏õ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÅ‡∏•‡∏∞‡∏õ‡∏∏‡πà‡∏° Edit ==========
                        logs.push(`üìÖ Timestamp: ${now()}`);
                        logs.push(`üß™ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏î‡∏£‡∏≠‡∏õ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏õ‡∏∏‡πà‡∏° Edit`);

                        const checkArrowDropdownStart = performance.now();

                        try {
                            // ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πâ‡∏≤ Resource/Budget ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡∏Å‡πà‡∏≠‡∏ô
                            await wait(1000);

                            const arrowButtonClicked = await page.evaluate(() => {
                                // ‡∏´‡∏≤‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏π‡∏Å‡∏®‡∏£‡∏Ç‡∏ß‡∏≤‡∏à‡∏≤‡∏Å SVG path ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏•‡∏≤‡∏™‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á
                                const arrowButtons = Array.from(document.querySelectorAll('button'))
                                    .filter(btn => {
                                        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ SVG ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏õ‡∏∏‡πà‡∏°
                                        const svg = btn.querySelector('svg');
                                        if (!svg) return false;

                                        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ SVG ‡∏°‡∏µ path ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏π‡∏Å‡∏®‡∏£‡∏Ç‡∏ß‡∏≤
                                        const path = svg.querySelector('path');
                                        return path && path.getAttribute('d')?.includes('M3.13523 6.15803');
                                    });

                                if (arrowButtons.length > 0) {
                                    console.log('‡∏û‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏π‡∏Å‡∏®‡∏£‡∏Ç‡∏ß‡∏≤ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏•‡∏¥‡∏Å...');
                                    arrowButtons[0].click();
                                    return true;
                                }
                                return false;
                            });

                            if (arrowButtonClicked) {
                                logs.push(`‚úì ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏°‡∏î‡∏£‡∏≠‡∏õ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à`);

                                // ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏î‡∏£‡∏≠‡∏õ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÅ‡∏™‡∏î‡∏á
                                await wait(1000);
                                const addButtonResult = await page.evaluate(() => {
                                    const addButtons = Array.from(document.querySelectorAll('button'))
                                        .filter(btn => btn.textContent?.includes('Edit'));
                                    const buttonCount = addButtons.length;

                                    console.log(`‡∏û‡∏ö‡∏õ‡∏∏‡πà‡∏° Edit ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ${buttonCount} ‡∏õ‡∏∏‡πà‡∏°`);

                                    if (buttonCount > 0) {
                                        addButtons[0].click();
                                        return { clicked: true, count: buttonCount };
                                    }
                                    return { clicked: false, count: buttonCount };
                                });

                                // ‡∏¢‡πâ‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡∏î‡πâ‡∏≤‡∏ô‡∏ô‡∏≠‡∏Å
                                logs.push(`‚úÖ ‡∏û‡∏ö‡∏õ‡∏∏‡πà‡∏° Edit ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ${addButtonResult.count} ‡∏õ‡∏∏‡πà‡∏°`);

                                if (addButtonResult.clicked) {
                                    logs.push('‚úÖ ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° Edit ‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');

                                    // ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏´‡∏•‡∏î
                                    await wait(1000);

                                    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
                                    const editFormOpened = await page.evaluate(() => {
                                        const dialog = document.querySelector('[role="dialog"], .dialog-content, [data-state="open"]');
                                        return !!dialog;
                                    });

                                    if (editFormOpened) {
                                        logs.push('‚úÖ ‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏õ‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');

                                        // ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏° Edit Resource
                                        logs.push('üß™ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£');

                                        try {
                                            // 1. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£
                                            const resourceNameInput = await page.$('input[placeholder="Enter Resource Name"]');
                                            if (resourceNameInput) {
                                                await resourceNameInput.click({ clickCount: 3 }); // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                                                await resourceNameInput.type('‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß');
                                                logs.push('‚úì ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡πÄ‡∏õ‡πá‡∏ô "‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß"');
                                            } else {
                                                logs.push('‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£');
                                            }

                                            // 2. ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£
                                            const selectTrigger = await page.$('.select-trigger');
                                            if (selectTrigger) {
                                                await selectTrigger.click();
                                                logs.push('‚úì ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£');

                                                // ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏™‡∏î‡∏á
                                                await wait(1000);

                                                // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å worker
                                                const workerOption = await page.evaluate(() => {
                                                    // ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏ß‡∏¥‡∏ò‡∏µ‡∏ï‡πà‡∏≤‡∏á‡πÜ
                                                    const options = Array.from(document.querySelectorAll('.select-item, [role="option"], li[role="option"], .select-dropdown-item'));

                                                    // ‡πÅ‡∏™‡∏î‡∏á debug ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                                                    console.log('‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:', options.map(opt => ({
                                                        text: opt.textContent.trim(),
                                                        value: opt.getAttribute('data-value'),
                                                        classes: opt.className
                                                    })));

                                                    // ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å worker ‡∏î‡πâ‡∏ß‡∏¢‡∏´‡∏•‡∏≤‡∏¢‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç
                                                    const workerOpt = options.find(opt =>
                                                        (opt.getAttribute('data-value') === 'worker') ||
                                                        (opt.textContent.toLowerCase().trim() === 'worker') ||
                                                        (opt.textContent.toLowerCase().trim().includes('worker'))
                                                    );

                                                    if (workerOpt) {
                                                        workerOpt.click();
                                                        return { clicked: true, text: workerOpt.textContent.trim() };
                                                    }

                                                    return { clicked: false };
                                                });

                                                if (workerOption.clicked) {
                                                    logs.push(`‚úì ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡πÄ‡∏õ‡πá‡∏ô "${workerOption.text}"`);
                                                } else {
                                                    logs.push('‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó "worker" ‡πÄ‡∏•‡∏¢');
                                                }
                                            } else {
                                                logs.push('‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£');
                                            }

                                            // 3. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô (Cost)
                                            const costInput = await page.$('input[placeholder="Enter Cost"]');
                                            if (costInput) {
                                                await costInput.click({ clickCount: 3 }); // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                                                await costInput.type('2500');
                                                logs.push('‚úì ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÄ‡∏õ‡πá‡∏ô "2,500"');
                                            } else {
                                                logs.push('‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô');
                                            }

                                            // 4. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (Quantity)
                                            const quantityInput = await page.$('input[placeholder="Enter Quantity"]');
                                            if (quantityInput) {
                                                await quantityInput.click({ clickCount: 3 }); // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                                                await quantityInput.type('8');
                                                logs.push('‚úì ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏õ‡πá‡∏ô "8"');
                                            } else {
                                                logs.push('‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô');
                                            }

                                            // ‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà‡∏Å‡πà‡∏≠‡∏ô‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° Update
                                            await wait(1000);

                                            // 5. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° Update
                                            const updateButton = await page.evaluateHandle(() => {
                                                const buttons = Array.from(document.querySelectorAll('button'));
                                                return buttons.find(button =>
                                                    button.textContent.includes('Update') ||
                                                    button.innerText.includes('Update')
                                                );
                                            });

                                            if (updateButton) {
                                                await updateButton.click();
                                                logs.push('‚úì ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° Update ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç');

                                                // ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô
                                                await wait(2000);

                                                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Dialog ‡∏õ‡∏¥‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
                                                const dialogClosed = await page.evaluate(() => {
                                                    return !document.querySelector('[role="dialog"], .dialog-content, [data-state="open"]');
                                                });

                                                if (dialogClosed) {
                                                    logs.push('‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (dialog ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß)');

                                                    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ñ‡∏π‡∏Å‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
                                                    const updatedResourceExists = await page.evaluate(() => {
                                                        return document.body.textContent.includes('‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß');
                                                    });

                                                    if (updatedResourceExists) {
                                                        logs.push('‚úÖ ‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤');
                                                    } else {
                                                        logs.push('‚ÑπÔ∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ (‡∏≠‡∏≤‡∏à‡∏ï‡πâ‡∏≠‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà)');
                                                    }
                                                } else {
                                                    logs.push('‚ö†Ô∏è Dialog ‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° Update');
                                                }
                                            } else {
                                                logs.push('‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏õ‡∏∏‡πà‡∏° Update');

                                                // ‡∏•‡∏≠‡∏á‡∏´‡∏≤‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢ "Update", "Save" ‡∏´‡∏£‡∏∑‡∏≠ "Submit"
                                                const saveButtons = await page.evaluate(() => {
                                                    const buttons = Array.from(document.querySelectorAll('button'));
                                                    const saveBtn = buttons.find(btn =>
                                                        btn.textContent.includes('Save') ||
                                                        btn.textContent.includes('Submit') ||
                                                        btn.textContent.includes('Update') ||
                                                        btn.textContent.includes('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å') ||
                                                        btn.textContent.includes('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô')
                                                    );
                                                    return saveBtn ? true : false;
                                                });

                                                if (saveButtons) {
                                                    logs.push('‚úì ‡∏û‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏Ñ‡∏•‡∏¥‡∏Å...');
                                                    await page.click('button:last-of-type');
                                                    await wait(1500);
                                                }
                                            }
                                        } catch (editError) {
                                            logs.push(`‚ö†Ô∏è ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: ${editError.message}`);
                                        }
                                    } else {
                                        logs.push('‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° Edit');
                                    }
                                } else {
                                    logs.push('‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏õ‡∏∏‡πà‡∏° Edit ‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå');
                                }
                            } else {
                                logs.push(`‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏î‡∏£‡∏≠‡∏õ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏∏`);

                                // ‡∏•‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏ö‡∏ö‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô
                                const alternativeButtons = await page.evaluate(() => {
                                    const allButtons = Array.from(document.querySelectorAll('button, [role="button"]'));
                                    return allButtons.slice(0, 10).map(btn => ({
                                        text: btn.textContent.trim(),
                                        html: btn.outerHTML.slice(0, 100) // ‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏Ñ‡πà 100 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÅ‡∏£‡∏Å
                                    })).filter(btn => btn.text.length > 0);
                                });

                                logs.push(`‚ÑπÔ∏è ‡∏û‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö ${alternativeButtons.length} ‡∏õ‡∏∏‡πà‡∏°`);
                                if (alternativeButtons.length > 0) {
                                    logs.push(`üìã ‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏û‡∏ö (‡πÅ‡∏™‡∏î‡∏á 3 ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏£‡∏Å):`);
                                    alternativeButtons.slice(0, 3).forEach(btn => {
                                        logs.push(`   ‚Ä¢ ${btn.text}`);
                                    });

                                    // ‡∏•‡∏≠‡∏á‡∏´‡∏≤‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£
                                    const actionButtons = alternativeButtons.filter(btn =>
                                        btn.text.includes('Action') ||
                                        btn.text.includes('Option') ||
                                        btn.text.includes('Menu') ||
                                        btn.html.includes('dropdown')
                                    );

                                    if (actionButtons.length > 0) {
                                        logs.push(`‚úì ‡∏û‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡πÄ‡∏õ‡πá‡∏ô‡∏î‡∏£‡∏≠‡∏õ‡∏î‡∏≤‡∏ß‡∏ô‡πå: "${actionButtons[0].text}"`);

                                        await page.evaluate((buttonText) => {
                                            const buttons = Array.from(document.querySelectorAll('button, [role="button"]'));
                                            const actionButton = buttons.find(btn => btn.textContent.includes(buttonText));
                                            if (actionButton) actionButton.click();
                                        }, actionButtons[0].text);

                                        logs.push('‚úì ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏°‡∏î‡∏£‡∏≠‡∏õ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å');
                                        await wait(1000);
                                    }
                                }
                            }
                        } catch (error) {
                            logs.push(`‚ö†Ô∏è ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏î‡∏£‡∏≠‡∏õ‡∏î‡∏≤‡∏ß‡∏ô‡πå: ${error.message}`);
                        }

                        const checkArrowDropdownEnd = performance.now();
                        logs.push(`üîÑ Arrow Dropdown Check Time: ${(checkArrowDropdownEnd - checkArrowDropdownStart).toFixed(2)} ms`);



                        // ========== ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 7: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£ ==========
                        logs.push(`üìÖ Timestamp: ${now()}`);
                        logs.push(`üß™ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£`);

                        const deleteTestStart = performance.now();

                        try {
                            await wait(1000);
                            const editedResourceName = '‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß';

                            const deleteResourceButtonClicked = await page.evaluate((resourceName) => {
                                const resourceRows = Array.from(document.querySelectorAll('table tbody tr'));
                                for (const row of resourceRows) {
                                    if (row.textContent.includes(resourceName)) {
                                        let deleteButton = row.querySelector('#delete-resource, button[id*="delete"]') ||
                                            row.querySelector('button[color="red"], button.cursor-pointer[variant="soft"][color="red"]') ||
                                            Array.from(row.querySelectorAll('button')).find(btn =>
                                                btn.textContent.trim().includes('Delete') || btn.classList.contains('delete-btn')
                                            );

                                        if (deleteButton) {
                                            deleteButton.click();
                                            return true;
                                        }
                                    }
                                }
                                return false;
                            }, editedResourceName);

                            if (deleteResourceButtonClicked) {
                                logs.push('‚úì ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° Delete ‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');

                                await page.waitForSelector('div[role="dialog"], [role="dialog"], .dialog-content, [data-state="open"]', { timeout: 5000 })
                                    .then(() => logs.push('‚úÖ ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÄ‡∏õ‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à'))
                                    .catch(() => logs.push('‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö (timeout)'));

                                await wait(800);

                                const confirmButtonClicked = await tryClickConfirmButton(page, logs, 2);

                                if (confirmButtonClicked) {
                                    logs.push('‚úì ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° Confirm ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö');
                                    await wait(3000);

                                    const dialogClosed = await page.evaluate(() => {
                                        return !document.querySelector('div[role="dialog"], [role="dialog"], .dialog-content, [data-state="open"]');
                                    });

                                    if (dialogClosed) {
                                        logs.push('‚úÖ Dialog ‡∏õ‡∏¥‡∏î‡∏•‡∏á‡πÅ‡∏•‡πâ‡∏ß - ‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£');

                                        // ‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
                                        // logs.push('üîÑ ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡∏à‡∏£‡∏¥‡∏á');
                                        // ‡∏£‡∏≠‡πÉ‡∏´‡πâ API ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
                                        // await wait(3000);
                                        // ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤
                                        // await page.reload({ waitUntil: 'networkidle0' });
                                        // ‡∏£‡∏≠‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä
                                        // await wait(2000);

                                        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡πÑ‡∏î‡πâ‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡∏à‡∏£‡∏¥‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
                                        const resourceDeleted = await page.evaluate((deletedResourceName) => {
                                            const rows = Array.from(document.querySelectorAll('table tbody tr'));
                                            const stillExists = rows.some(row => row.textContent.includes(deletedResourceName));
                                            console.log('‡∏¢‡∏±‡∏á‡∏û‡∏ö‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£:', stillExists);
                                            console.log('‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡πÅ‡∏ñ‡∏ß:', rows.map(r => r.textContent.trim()));
                                            return !stillExists;
                                        }, editedResourceName);

                                        if (resourceDeleted) {
                                            logs.push('‚úÖ ‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢');
                                            logs.push('üéâ ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                                        } else {
                                            logs.push('‚ö†Ô∏è ‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß: ‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏°‡πâ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏•‡∏ö‡πÅ‡∏•‡πâ‡∏ß');

                                            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤
                                            const apiCalls = await page.evaluate(() => {
                                                return performance.getEntries()
                                                    .filter(entry => entry.name.includes('/api/'))
                                                    .map(e => ({ url: e.name, duration: e.duration }))
                                                    .slice(-5); // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ 5 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
                                            });

                                            if (apiCalls.length > 0) {
                                                logs.push(`üìä API calls ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: ${apiCalls.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`);
                                                apiCalls.forEach(call => {
                                                    logs.push(`   - ${call.url} (${call.duration.toFixed(2)} ms)`);
                                                });
                                            }
                                        }
                                    } else {
                                        logs.push('‚ö†Ô∏è Dialog ‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏î Confirm');
                                    }
                                } else {
                                    logs.push('‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏õ‡∏∏‡πà‡∏° Confirm ‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                                }
                            } else {
                                logs.push('‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° Delete ‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£');

                                // fallback ‚Üí dropdown
                                const dropdownClicked = await page.evaluate(() => {
                                    const dropdowns = Array.from(document.querySelectorAll('button'))
                                        .filter(btn => {
                                            const svg = btn.querySelector('svg');
                                            return svg && svg.querySelector('path');
                                        });

                                    if (dropdowns.length > 0) {
                                        dropdowns[0].click();
                                        return true;
                                    }
                                    return false;
                                });

                                if (dropdownClicked) {
                                    logs.push('‚úì ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏°‡∏î‡∏£‡∏≠‡∏õ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                                    await wait(800);

                                    const deleteButtonClicked = await page.evaluate(() => {
                                        const deleteButtons = Array.from(document.querySelectorAll('button'))
                                            .filter(btn => btn.textContent?.includes('Delete'));

                                        if (deleteButtons.length > 0) {
                                            deleteButtons[0].click();
                                            return true;
                                        }
                                        return false;
                                    });

                                    if (deleteButtonClicked) {
                                        logs.push('‚úì ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° Delete ‡πÉ‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏î‡∏£‡∏≠‡∏õ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                                        await wait(800);

                                        const confirmDialogOpened = await page.evaluate(() => {
                                            return !!document.querySelector('div[role="dialog"], [role="dialog"], .dialog-content, [data-state="open"]');
                                        });

                                        if (confirmDialogOpened) {
                                            logs.push('‚úÖ ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÄ‡∏õ‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');

                                            const confirmClicked = await tryClickConfirmButton(page, logs, 2);
                                            if (confirmClicked) {
                                                logs.push('‚úì ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° Confirm ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö');
                                                await wait(3000);

                                                logs.push('üîÑ ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡∏à‡∏£‡∏¥‡∏á');
                                                await page.reload({ waitUntil: 'networkidle0' });
                                                await wait(2000);
                                            }
                                        }
                                    }
                                }
                            }

                            const deleteTestEnd = performance.now();
                            logs.push(`üîÑ Delete Test Time: ${(deleteTestEnd - deleteTestStart).toFixed(2)} ms`);

                        } catch (deleteError) {
                            logs.push(`‚ö†Ô∏è ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏•‡∏ö: ${deleteError.message}`);
                        }

                        // ========== ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° Confirm ==========
                        async function tryClickConfirmButton(page, logs, retries = 2) {
                            for (let i = 0; i < retries; i++) {
                                try {
                                    // ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏´‡∏°‡πà: ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏≤‡∏° ID ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Å‡πà‡∏≠‡∏ô
                                    const specificIdButtonClicked = await page.evaluate(() => {
                                        const confirmButton = document.querySelector('#delete-resource-button-confirm-em');
                                        if (confirmButton) {
                                            console.log('‡∏û‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏à‡∏≤‡∏Å ID ‡πÄ‡∏â‡∏û‡∏≤‡∏∞');
                                            confirmButton.click();
                                            return true;
                                        }
                                        return false;
                                    });

                                    if (specificIdButtonClicked) {
                                        logs.push(`‚úì ‡∏û‡∏ö‡πÅ‡∏•‡∏∞‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ ID ‡πÄ‡∏â‡∏û‡∏≤‡∏∞`);
                                        return true;
                                    }

                                    // ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÅ‡∏£‡∏Å: ‡πÇ‡∏î‡∏¢‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
                                    const confirmButtonClicked = await page.evaluate(() => {
                                        // ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
                                        const confirmTexts = ['confirm', 'yes', 'ok', 'delete', 'remove', '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô', '‡∏ï‡∏Å‡∏•‡∏á', '‡∏•‡∏ö'];

                                        // ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° (‡πÑ‡∏°‡πà‡∏Ñ‡∏≥‡∏ô‡∏∂‡∏á‡∏ñ‡∏∂‡∏á‡∏ï‡∏±‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏´‡∏ç‡πà-‡πÄ‡∏•‡πá‡∏Å)
                                        const buttons = Array.from(document.querySelectorAll('button, [role="button"]'))
                                            .filter(btn => {
                                                const text = btn.textContent?.trim().toLowerCase() || '';
                                                return confirmTexts.some(confirmText =>
                                                    text === confirmText || text.includes(confirmText));
                                            });

                                        // ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏≤‡∏°‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
                                        if (buttons.length === 0) {
                                            const dialogButtons = Array.from(document.querySelectorAll(
                                                'div[role="dialog"] button, [role="dialog"] button, .dialog-content button, [data-state="open"] button'
                                            ));

                                            // ‡∏à‡∏∞‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏•‡∏±‡∏Å/‡∏°‡∏µ‡∏™‡∏µ‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏≤‡∏á‡∏Ç‡∏ß‡∏≤‡∏™‡∏∏‡∏î
                                            const primaryButton = dialogButtons.find(btn =>
                                                btn.classList.contains('primary') ||
                                                btn.getAttribute('color') === 'primary' ||
                                                btn.getAttribute('variant') === 'contained' ||
                                                btn.classList.contains('btn-danger')
                                            );

                                            if (primaryButton) {
                                                primaryButton.click();
                                                return true;
                                            }

                                            // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏•‡∏±‡∏Å‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏°‡∏û‡∏≠‡∏î‡∏µ‡∏™‡∏≠‡∏á‡∏õ‡∏∏‡πà‡∏°
                                            // ‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤‡∏°‡∏±‡∏Å‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢‡∏°‡∏±‡∏Å‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å)
                                            if (dialogButtons.length === 2) {
                                                dialogButtons[1].click();
                                                return true;
                                            }

                                            return false;
                                        }

                                        // ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡∏û‡∏ö
                                        buttons[0].click();
                                        return true;
                                    });

                                    if (confirmButtonClicked) {
                                        return true;
                                    }

                                    // ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏á: ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏â‡∏û‡∏≤‡∏∞
                                    await wait(500);
                                    const buttonSelector = await page.evaluate(() => {
                                        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏µ‡∏ö‡∏±‡∏Å
                                        console.log('‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏û‡∏ö:',
                                            Array.from(document.querySelectorAll('button'))
                                                .map(b => ({ text: b.textContent, class: b.className }))
                                        );

                                        // ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏•‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡πÅ‡∏™‡∏î‡∏á‡∏ñ‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö
                                        const dangerButtons = document.querySelectorAll('button[color="error"], button[color="danger"], button[color="red"]');
                                        if (dangerButtons.length > 0) return 'button[color="error"], button[color="danger"], button[color="red"]';

                                        return null;
                                    });

                                    if (buttonSelector) {
                                        await page.click(buttonSelector);
                                        return true;
                                    }

                                } catch (error) {
                                    logs.push(`‚ö†Ô∏è ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà ${i + 1} ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ${error.message}`);
                                    await wait(500);
                                }
                            }

                            logs.push('‚ÑπÔ∏è ‡∏ó‡∏î‡∏•‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏ß‡∏¥‡∏ò‡∏µ force click ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢ JavaScript');

                            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÇ‡∏ï‡πâ‡∏ï‡∏≠‡∏ö‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡∏¥‡∏î
                            await page.evaluate(() => {
                                const dialog = document.querySelector('div[role="dialog"], [role="dialog"], .dialog-content, [data-state="open"]');
                                if (dialog) {
                                    const buttons = Array.from(dialog.querySelectorAll('button'));
                                    console.log('‡∏û‡∏ö‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÇ‡∏ï‡πâ‡∏ï‡∏≠‡∏ö:', buttons.length);
                                    console.log('‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏∏‡πà‡∏°:', buttons.map(b => ({
                                        text: b.textContent.trim(),
                                        classes: b.className,
                                        attributes: Array.from(b.attributes).map(a => `${a.name}="${a.value}"`).join(', ')
                                    })));

                                    // ‡∏ó‡∏î‡∏•‡∏≠‡∏á‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ (‡∏°‡∏±‡∏Å‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô)
                                    if (buttons.length > 0) {
                                        buttons[buttons.length - 1].click();
                                        return true;
                                    }
                                }
                                return false;
                            });

                            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à
                            await wait(500);

                            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ dialog ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
                            const dialogClosed = await page.evaluate(() => {
                                return !document.querySelector('div[role="dialog"], [role="dialog"], .dialog-content, [data-state="open"]');
                            });

                            // ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡∏î dialog
                            return dialogClosed;
                        }

                        const navigateToResourceEnd = performance.now();
                        logs.push(`üîÑ Resource/Budget Navigation Time: ${(navigateToResourceEnd - navigateToResourceStart).toFixed(2)} ms`);
                    } else {
                        logs.push(`‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤ Resource/Budget ‡πÑ‡∏î‡πâ`);
                        logs.push(`üîç URL ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: ${isResourcePage.url}`);
                    }
                } catch (error) {
                    logs.push(`‚ö†Ô∏è ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Resource/Budget: ${error.message}`);
                }
            } else {
                logs.push(`‚ö†Ô∏è ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ Timeline`);

                // ‡∏•‡∏≠‡∏á‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà Timeline tab
                try {
                    await page.click('button[value="timeline"]');
                    await wait(1000);
                    logs.push(`üîÑ ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πá‡∏ö Timeline ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á`);

                    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ß‡πà‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ Timeline ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
                    const isTimelinePageNow = await page.evaluate(() => {
                        return document.querySelector('button[value="timeline"][data-state="active"]') !== null ||
                            document.querySelector('button[aria-selected="true"]') !== null ||
                            window.location.pathname.includes('/employeePlan');
                    });

                    if (isTimelinePageNow) {
                        logs.push(`‚úÖ ‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤ Timeline ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πá‡∏ö‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á`);
                    } else {
                        logs.push(`‚ùå ‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ Timeline ‡πÅ‡∏°‡πâ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πá‡∏ö‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á`);
                    }
                } catch (error) {
                    logs.push(`‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πá‡∏ö Timeline ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡πÑ‡∏î‡πâ: ${error.message}`);
                }
            }
        } else {
            logs.push(`‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö`);
        }

        // ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö
        logs.push(`\n======== ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö ========`);
        logs.push(`üìÖ ‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î: ${now()}`);
        logs.push(`‚úÖ ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå`);

    } catch (error) {
        console.error(`[${now()}] ‚ùå ERROR:`, error);
        logs.push(`‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${error.message}`);
        logs.push(`üìë Stack Trace: ${error.stack}`);  // ‡πÄ‡∏Å‡πá‡∏ö stack trace ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î
    } finally {
        // ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå
        fs.writeFileSync(logFilename, logs.join('\n'));
        console.log(`[${now()}] üìù ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏•‡∏á‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå ${logFilename}`);

        // ‡∏õ‡∏¥‡∏î‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå
        if (browser) {
            await browser.close();
            console.log(`[${now()}] üîí ‡∏õ‡∏¥‡∏î‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢`);
        }
    }
})();